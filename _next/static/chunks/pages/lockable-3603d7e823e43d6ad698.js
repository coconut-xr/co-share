(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[78],{9498:function(e,a,t){"use strict";t.r(a),t.d(a,{LockableExamplePage:function(){return C},default:function(){return E}});var n=t(8077),s=t(7378),o=t(4671),c=t(1655),p=t(4467),r=t(5671),m=t(3144),k=t(7326),N=t(6692),l=t(6215),u=t(1120),d=t(4942),i=t(3349),f=t(7340),b=t(6431),y=t(9148);function w(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,u.Z)(e);if(a){var s=(0,u.Z)(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return(0,l.Z)(this,t)}}var h=function(e){(0,N.Z)(t,e);var a=w(t);function t(e,n){var s;return(0,r.Z)(this,t),s=a.call(this),(0,d.Z)((0,k.Z)(s),"state",void 0),(0,d.Z)((0,k.Z)(s),"subscriber",i.Subscriber.create(t,(function(e,a,t){var n=s.state.getState();a(n.value,n.owner)}))),(0,d.Z)((0,k.Z)(s),"setSlider",i.Action.create((0,k.Z)(s),"setSlider",(function(e,a,t){s.state.getState().owner==a&&(s.state.setState({value:t}),s.setSlider.publishTo(null==e?{to:"all"}:{to:"all-except-one",except:e},a,t))}))),(0,d.Z)((0,k.Z)(s),"setSliderLock",i.Request.create((0,k.Z)(s),"setSliderLock",(function(e,a){return(null==e?s.setSliderLock.publishTo(s.mainLink,a):(0,f.of)(!0)).pipe((0,b.b)((function(t){t&&(s.forceSliderLock(a),null!=e&&s.forceSliderLock.publishTo({to:"all-except-one",except:e},a))})))}))),(0,d.Z)((0,k.Z)(s),"forceSliderLock",i.Action.create((0,k.Z)(s),"forceSliderLock",(function(e,a){s.state.setState({owner:a})}))),s.state=(0,y.Z)((function(){return{value:e,owner:n}})),s}return(0,m.Z)(t,[{key:"onUnlink",value:function(e){}},{key:"onLink",value:function(e){}}]),t}(i.Store),g=t(7462),S=t(4925),v=t(3905),x=["components"],L={};function R(e){var a=e.components,t=(0,S.Z)(e,x);return(0,v.kt)("wrapper",(0,g.Z)({},L,t,{components:a,mdxType:"MDXLayout"}),(0,v.kt)("h1",null,"Lockable Example"),(0,v.kt)("p",null,"When building applications for concurrent usage, it is sometimes essential to prevent simultaneous editing of a single resource,\nIn this example, locking functionality is implemented to give only one user the ability to change to lock. "),(0,v.kt)("p",null,"In an actual application, the user does not want to wait for approval. The ",(0,v.kt)("a",{parentName:"p",href:"https://cocoss-org.github.io/co-share/optimistic-lockable"},(0,v.kt)("strong",{parentName:"a"},"Optimistic Lockable"))," Example shows how to improve this scenario."),(0,v.kt)("h1",null,"Source Code"),(0,v.kt)("p",null,(0,v.kt)("a",{parentName:"p",href:"https://github.com/cocoss-org/co-share/blob/master/examples/stores/lockable.ts"},(0,v.kt)("inlineCode",{parentName:"a"},"lockable.ts"))),(0,v.kt)("pre",{className:"language-typescript"},(0,v.kt)("code",{parentName:"pre",className:"language-typescript"},(0,v.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"class")," ",(0,v.kt)("span",{parentName:"code",className:"token class-name"},(0,v.kt)("span",{parentName:"span",className:"token maybe-class-name"},"LockableStore"))," ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"extends")," ",(0,v.kt)("span",{parentName:"code",className:"token class-name"},(0,v.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Store"))," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"public")," state",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token maybe-class-name"},"StoreApi"),(0,v.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{")," value",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token builtin"},"number"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},";")," owner",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token builtin"},"string")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"code",className:"token operator"},">"),"\n\n    ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,v.kt)("span",{parentName:"code",className:"token function"},"onUnlink"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"link",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token maybe-class-name"},"StoreLink"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"void")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n    ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,v.kt)("span",{parentName:"code",className:"token function"},"onLink"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"link",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token maybe-class-name"},"StoreLink"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"void")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n    ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"public")," subscriber",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Subscriber"),(0,v.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,v.kt)("span",{parentName:"code",className:"token maybe-class-name"},"LockableStore"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,v.kt)("span",{parentName:"code",className:"token builtin"},"number"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,v.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,v.kt)("span",{parentName:"code",className:"token operator"},">")," ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,v.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Subscriber"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"create"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token maybe-class-name"},"LockableStore"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"connection",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," accept",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," deny",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"const")," s ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"getState"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n            ",(0,v.kt)("span",{parentName:"code",className:"token function"},"accept"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"s",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"value"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," s",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"owner"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,v.kt)("span",{parentName:"code",className:"token function"},"constructor"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"value",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token builtin"},"number"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," owner",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"super"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"state")," ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,v.kt)("span",{parentName:"code",className:"token function"},"create"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{")," value",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," owner ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n    setSlider ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,v.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Action"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"create"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,v.kt)("span",{parentName:"code",className:"token string"},'"setSlider"'),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," by",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," value",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token builtin"},"number"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{")," owner ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"getState"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"owner ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"!=")," by",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",(0,v.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return"),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n        ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"setState"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{")," value ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n        ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"setSlider"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"publishTo"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"==")," ",(0,v.kt)("span",{parentName:"code",className:"token keyword null nil"},"null")," ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"?")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{")," to",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token string"},'"all"')," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{")," to",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token string"},'"all-except-one"'),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," except",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," origin ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," by",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," value",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    setSliderLock",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Request"),(0,v.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,v.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,v.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,v.kt)("span",{parentName:"code",className:"token builtin"},"boolean"),(0,v.kt)("span",{parentName:"code",className:"token operator"},">")," ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,v.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Request"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"create"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,v.kt)("span",{parentName:"code",className:"token string"},'"setSliderLock"'),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," owner",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"==")," ",(0,v.kt)("span",{parentName:"code",className:"token keyword null nil"},"null")," ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"?")," ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"setSliderLock"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"publishTo"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"mainLink"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," owner",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"of"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token boolean"},"true"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"pipe"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n            ",(0,v.kt)("span",{parentName:"code",className:"token function"},"tap"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"approved",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                ",(0,v.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"approved",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                    ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"forceSliderLock"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"owner",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                    ",(0,v.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"!=")," ",(0,v.kt)("span",{parentName:"code",className:"token keyword null nil"},"null"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                        ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"forceSliderLock"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"publishTo"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{")," to",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token string"},'"all-except-one"'),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," except",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," origin ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," owner",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                    ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n            ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    forceSliderLock ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,v.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Action"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"create"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,v.kt)("span",{parentName:"code",className:"token string"},'"forceSliderLock"'),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," owner",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"setState"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            owner",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n")),(0,v.kt)("p",null,(0,v.kt)("a",{parentName:"p",href:"https://github.com/cocoss-org/co-share/blob/master/examples/pages/lockable.tsx"},(0,v.kt)("inlineCode",{parentName:"a"},"lockable.tsx"))),(0,v.kt)("pre",{className:"language-typescript"},(0,v.kt)("code",{parentName:"pre",className:"language-typescript"},(0,v.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,v.kt)("span",{parentName:"code",className:"token function"},(0,v.kt)("span",{parentName:"span",className:"token maybe-class-name"},"LockableExamplePage")),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{")," rootStore ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{")," rootStore",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token maybe-class-name"},"RootStore")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token constant"},"JSX"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},(0,v.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Element"))," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"const")," store ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,v.kt)("span",{parentName:"code",className:"token function"},"useStoreSubscription"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token string"},'"lockable"'),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token number"},"1000"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"value",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token builtin"},"number"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," owner",(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token builtin"},"string"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,v.kt)("span",{parentName:"code",className:"token class-name"},(0,v.kt)("span",{parentName:"span",className:"token maybe-class-name"},"LockableStore")),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"value",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," owner",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token keyword nil"},"undefined"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        rootStore\n    ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"const")," id ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,v.kt)("span",{parentName:"code",className:"token function"},"useMemo"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," rootStore",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"mainLink"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"connection"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"userData"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"id"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"["),"rootStore",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"const")," inputRef ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,v.kt)("span",{parentName:"code",className:"token generic-function"},(0,v.kt)("span",{parentName:"span",className:"token function"},"useRef"),(0,v.kt)("span",{parentName:"span",className:"token generic class-name"},(0,v.kt)("span",{parentName:"span",className:"token operator"},"<"),(0,v.kt)("span",{parentName:"span",className:"token maybe-class-name"},"HTMLInputElement"),(0,v.kt)("span",{parentName:"span",className:"token operator"},">"))),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token keyword null nil"},"null"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"const")," useStoreState ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,v.kt)("span",{parentName:"code",className:"token function"},"useMemo"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token arrow operator"},"=>"),"\n            ",(0,v.kt)("span",{parentName:"code",className:"token generic-function"},(0,v.kt)("span",{parentName:"span",className:"token function"},"create"),(0,v.kt)("span",{parentName:"span",className:"token generic class-name"},(0,v.kt)("span",{parentName:"span",className:"token operator"},"<"),(0,v.kt)("span",{parentName:"span",className:"token punctuation"},"{"),"\n                value",(0,v.kt)("span",{parentName:"span",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"span",className:"token builtin"},"number"),"\n                owner",(0,v.kt)("span",{parentName:"span",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"span",className:"token builtin"},"string"),"\n            ",(0,v.kt)("span",{parentName:"span",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"span",className:"token operator"},">"))),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"store",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"state"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"["),"store",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"]"),"\n    ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,v.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{")," owner",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," value ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,v.kt)("span",{parentName:"code",className:"token function"},"useStoreState"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,v.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"<"),"div className",(0,v.kt)("span",{parentName:"code",className:"token operator"},"="),(0,v.kt)("span",{parentName:"code",className:"token string"},'"p-3"'),(0,v.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"<"),"button className",(0,v.kt)("span",{parentName:"code",className:"token operator"},"="),(0,v.kt)("span",{parentName:"code",className:"token string"},'"btn btn-outline-primary"')," onClick",(0,v.kt)("span",{parentName:"code",className:"token operator"},"="),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," store",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"setSliderLock"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"id",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"subscribe"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                lock\n            ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,v.kt)("span",{parentName:"code",className:"token operator"},"/"),"button",(0,v.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"<"),"button className",(0,v.kt)("span",{parentName:"code",className:"token operator"},"="),(0,v.kt)("span",{parentName:"code",className:"token string"},'"btn btn-outline-danger mx-3"')," onClick",(0,v.kt)("span",{parentName:"code",className:"token operator"},"="),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," store",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"setSliderLock"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token string"},'"none"'),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"subscribe"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                release\n            ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,v.kt)("span",{parentName:"code",className:"token operator"},"/"),"button",(0,v.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"<"),"h2",(0,v.kt)("span",{parentName:"code",className:"token operator"},">"),(0,v.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Owner"),(0,v.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"owner",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,v.kt)("span",{parentName:"code",className:"token operator"},"/"),"h2",(0,v.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"<"),"input\n                className",(0,v.kt)("span",{parentName:"code",className:"token operator"},"="),(0,v.kt)("span",{parentName:"code",className:"token string"},'"w-100"'),"\n                onChange",(0,v.kt)("span",{parentName:"code",className:"token operator"},"="),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,v.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," inputRef",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"current")," ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"&&")," store",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token method function property-access"},"setSlider"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"("),"id",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},",")," inputRef",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"current"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,v.kt)("span",{parentName:"code",className:"token property-access"},"valueAsNumber"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                type",(0,v.kt)("span",{parentName:"code",className:"token operator"},"="),(0,v.kt)("span",{parentName:"code",className:"token string"},'"range"'),"\n                min",(0,v.kt)("span",{parentName:"code",className:"token operator"},"="),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,v.kt)("span",{parentName:"code",className:"token number"},"0"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                max",(0,v.kt)("span",{parentName:"code",className:"token operator"},"="),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,v.kt)("span",{parentName:"code",className:"token number"},"10"),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                value",(0,v.kt)("span",{parentName:"code",className:"token operator"},"="),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"value",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                ref",(0,v.kt)("span",{parentName:"code",className:"token operator"},"="),(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"inputRef",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,v.kt)("span",{parentName:"code",className:"token operator"},">"),(0,v.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,v.kt)("span",{parentName:"code",className:"token operator"},"/"),"input",(0,v.kt)("span",{parentName:"code",className:"token operator"},">"),"\n        ",(0,v.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,v.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,v.kt)("span",{parentName:"code",className:"token operator"},">"),"\n    ",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,v.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n")))}R.isMDXComponent=!0;var Z=t(9138),j=t(4246);function E(){return(0,j.jsxs)("div",{className:"d-flex flex-column fullscreen",children:[(0,j.jsx)(c.h,{selectedIndex:3}),(0,j.jsxs)("div",{className:"d-flex flex-column justify-content-stretch container-lg",children:[(0,j.jsx)("div",{className:"d-flex flex-row-responsive",children:(0,j.jsx)(p.X,{twoClients:!0,initStores:function(e){return e.addStore(new h(0,"none"),"lockable")},children:function(e){return(0,j.jsx)(C,{rootStore:e})}})}),(0,j.jsx)("div",{className:"p-3 flex-basis-0 flex-grow-1",children:(0,j.jsx)(R,{})})]}),(0,j.jsx)(Z.$,{})]})}function C(e){var a=e.rootStore,t=(0,n.useStoreSubscription)("lockable",1e3,(function(e,a){return new h(e,a)}),void 0,a),c=(0,s.useMemo)((function(){return a.mainLink.connection.userData.id}),[a]),p=(0,s.useRef)(null),r=(0,s.useMemo)((function(){return(0,o.Z)(t.state)}),[t])(),m=r.owner,k=r.value;return(0,j.jsxs)("div",{className:"p-3",children:[(0,j.jsx)("button",{className:"btn btn-outline-primary",onClick:function(){return t.setSliderLock(c).subscribe()},children:"lock"}),(0,j.jsx)("button",{className:"btn btn-outline-danger mx-3",onClick:function(){return t.setSliderLock("none").subscribe()},children:"release"}),(0,j.jsxs)("h2",{children:["Owner: ",m]}),(0,j.jsx)("input",{className:"w-100",onChange:function(){return p.current&&t.setSlider(c,p.current.valueAsNumber)},type:"range",min:0,max:10,value:k,ref:p})]})}},7786:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/lockable",function(){return t(9498)}])},4671:function(e,a,t){"use strict";t.d(a,{Z:function(){return c}});var n=t(7378);function s(e){let a;const t=new Set,n=(e,n)=>{const s="function"===typeof e?e(a):e;if(s!==a){const e=a;a=n?s:Object.assign({},a,s),t.forEach((t=>t(a,e)))}},s=()=>a,o={setState:n,getState:s,subscribe:(e,n,o)=>n||o?((e,n=s,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let c=n(a);function p(){const t=n(a);if(!o(c,t)){const a=c;e(c=t,a)}}return t.add(p),()=>t.delete(p)})(e,n,o):(t.add(e),()=>t.delete(e)),destroy:()=>t.clear()};return a=e(n,s,o),o}const o="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?n.useEffect:n.useLayoutEffect;function c(e){const a="function"===typeof e?s(e):e,t=(e=a.getState,t=Object.is)=>{const[,s]=(0,n.useReducer)((e=>e+1),0),c=a.getState(),p=(0,n.useRef)(c),r=(0,n.useRef)(e),m=(0,n.useRef)(t),k=(0,n.useRef)(!1),N=(0,n.useRef)();let l;void 0===N.current&&(N.current=e(c));let u=!1;(p.current!==c||r.current!==e||m.current!==t||k.current)&&(l=e(c),u=!t(N.current,l)),o((()=>{u&&(N.current=l),p.current=c,r.current=e,m.current=t,k.current=!1}));const d=(0,n.useRef)(c);o((()=>{const e=()=>{try{const e=a.getState(),t=r.current(e);m.current(N.current,t)||(p.current=e,N.current=t,s())}catch(e){k.current=!0,s()}},t=a.subscribe(e);return a.getState()!==d.current&&e(),t}),[]);const i=u?l:N.current;return(0,n.useDebugValue)(i),i};return Object.assign(t,a),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[t,a];return{next(){const a=e.length<=0;return{value:e.shift(),done:a}}}},t}},9148:function(e,a,t){"use strict";function n(e){let a;const t=new Set,n=(e,n)=>{const s="function"===typeof e?e(a):e;if(s!==a){const e=a;a=n?s:Object.assign({},a,s),t.forEach((t=>t(a,e)))}},s=()=>a,o={setState:n,getState:s,subscribe:(e,n,o)=>n||o?((e,n=s,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let c=n(a);function p(){const t=n(a);if(!o(c,t)){const a=c;e(c=t,a)}}return t.add(p),()=>t.delete(p)})(e,n,o):(t.add(e),()=>t.delete(e)),destroy:()=>t.clear()};return a=e(n,s,o),o}t.d(a,{Z:function(){return n}})}},function(e){e.O(0,[667,971,100,774,888,179],(function(){return a=7786,e(e.s=a);var a}));var a=e.O();_N_E=a}]);
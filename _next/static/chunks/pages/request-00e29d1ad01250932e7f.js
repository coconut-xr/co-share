(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{7148:function(e,a,n){"use strict";n.r(a),n.d(a,{Request:function(){return A},RequestExamplePage:function(){return L},default:function(){return C}});var t=n(5785),s=n(8077),o=n(7378),p=n(9121),c=n(9734),r=n(6431),m=n(1655),k=n(4467),N=n(5671),u=n(3144),l=n(7326),d=n(6692),i=n(6215),f=n(1120),b=n(4942),y=n(3349),v=n(6562),w=n(7340);function h(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=(0,f.Z)(e);if(a){var s=(0,f.Z)(this).constructor;n=Reflect.construct(t,arguments,s)}else n=t.apply(this,arguments);return(0,i.Z)(this,n)}}var g=function(e){(0,d.Z)(n,e);var a=h(n);function n(){var e;(0,N.Z)(this,n);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=a.call.apply(a,[this].concat(s)),(0,b.Z)((0,l.Z)(e),"subscriber",y.Subscriber.create(n,(function(e,a,n){return a()}))),(0,b.Z)((0,l.Z)(e),"add",y.Request.create((0,l.Z)(e),"add",(function(a,n,t){return null==a?e.add.publishTo(e.mainLink,n,t):Math.random()>.5?v.C:(0,w.of)(n+t)}))),e}return(0,u.Z)(n,[{key:"onUnlink",value:function(e){}},{key:"onLink",value:function(e){}}]),n}(y.Store),x=n(7462),R=n(4925),q=n(3905),S=["components"],j={};function E(e){var a=e.components,n=(0,R.Z)(e,S);return(0,q.kt)("wrapper",(0,x.Z)({},j,n,{components:a,mdxType:"MDXLayout"}),(0,q.kt)("h1",null,"Request Example"),(0,q.kt)("p",null,'You can request the addition of "Variable 1" and "Variable 2". The library supports the request and response paradigm and uses it internally for subscribing to a ',(0,q.kt)("strong",{parentName:"p"},"Store"),"."),(0,q.kt)("p",null,(0,q.kt)("strong",{parentName:"p"},"For demonstration purposes, there is a 50% chance of dropping the request for the calculation."),"\n",(0,q.kt)("strong",{parentName:"p"},"If a request fails, the system will try to send another request after a one second delay.")),(0,q.kt)("h1",null,"Source Code"),(0,q.kt)("p",null,(0,q.kt)("a",{parentName:"p",href:"https://github.com/cocoss-org/co-share/blob/master/examples/stores/request.ts"},(0,q.kt)("inlineCode",{parentName:"a"},"request.ts"))),(0,q.kt)("pre",{className:"language-typescript"},(0,q.kt)("code",{parentName:"pre",className:"language-typescript"},(0,q.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"class")," ",(0,q.kt)("span",{parentName:"code",className:"token class-name"},(0,q.kt)("span",{parentName:"span",className:"token maybe-class-name"},"RequestStore"))," ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"extends")," ",(0,q.kt)("span",{parentName:"code",className:"token class-name"},(0,q.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Store"))," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,q.kt)("span",{parentName:"code",className:"token function"},"onUnlink"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),"link",(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token maybe-class-name"},"StoreLink"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"void")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n    ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,q.kt)("span",{parentName:"code",className:"token function"},"onLink"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),"link",(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token maybe-class-name"},"StoreLink"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"void")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n    ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"public")," subscriber",(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Subscriber"),(0,q.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,q.kt)("span",{parentName:"code",className:"token maybe-class-name"},"RequestStore"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,q.kt)("span",{parentName:"code",className:"token operator"},">")," ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,q.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Subscriber"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token method function property-access"},"create"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token maybe-class-name"},"RequestStore"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),"connection",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," accept",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," deny",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,q.kt)("span",{parentName:"code",className:"token arrow operator"},"=>"),"\n        ",(0,q.kt)("span",{parentName:"code",className:"token function"},"accept"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    add",(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Request"),(0,q.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,q.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,q.kt)("span",{parentName:"code",className:"token builtin"},"number"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,q.kt)("span",{parentName:"code",className:"token builtin"},"number"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,q.kt)("span",{parentName:"code",className:"token builtin"},"number"),(0,q.kt)("span",{parentName:"code",className:"token operator"},">")," ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,q.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Request"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token method function property-access"},"create"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,q.kt)("span",{parentName:"code",className:"token string"},'"add"'),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," v1",(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token builtin"},"number"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," v2",(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token builtin"},"number"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,q.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,q.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),"origin ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"==")," ",(0,q.kt)("span",{parentName:"code",className:"token keyword null nil"},"null"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",(0,q.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token property-access"},"add"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token method function property-access"},"publishTo"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token property-access"},"mainLink"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," v1",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," v2",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n        ",(0,q.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,q.kt)("span",{parentName:"code",className:"token known-class-name class-name"},"Math"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token method function property-access"},"random"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,q.kt)("span",{parentName:"code",className:"token operator"},">")," ",(0,q.kt)("span",{parentName:"code",className:"token number"},"0.5")," ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"?")," ",(0,q.kt)("span",{parentName:"code",className:"token constant"},"NEVER")," ",(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"of"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),"v1 ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"+")," v2",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n")),(0,q.kt)("p",null,(0,q.kt)("a",{parentName:"p",href:"https://github.com/cocoss-org/co-share/blob/master/examples/pages/request.tsx"},(0,q.kt)("inlineCode",{parentName:"a"},"request.tsx"))),(0,q.kt)("pre",{className:"language-typescript"},(0,q.kt)("code",{parentName:"pre",className:"language-typescript"},(0,q.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,q.kt)("span",{parentName:"code",className:"token function"},(0,q.kt)("span",{parentName:"span",className:"token maybe-class-name"},"RequestExamplePage")),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{")," rootStore ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{")," rootStore",(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token maybe-class-name"},"RootStore")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token constant"},"JSX"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token property-access"},(0,q.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Element"))," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"const")," store ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,q.kt)("span",{parentName:"code",className:"token function"},"useStoreSubscription"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token string"},'"request"'),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,q.kt)("span",{parentName:"code",className:"token number"},"1000"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,q.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,q.kt)("span",{parentName:"code",className:"token class-name"},(0,q.kt)("span",{parentName:"span",className:"token maybe-class-name"},"RequestStore")),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,q.kt)("span",{parentName:"code",className:"token keyword nil"},"undefined"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," rootStore",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"["),"requests",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," setRequests",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,q.kt)("span",{parentName:"code",className:"token generic-function"},(0,q.kt)("span",{parentName:"span",className:"token function"},"useState"),(0,q.kt)("span",{parentName:"span",className:"token generic class-name"},(0,q.kt)("span",{parentName:"span",className:"token operator"},"<"),(0,q.kt)("span",{parentName:"span",className:"token known-class-name class-name"},"Array"),(0,q.kt)("span",{parentName:"span",className:"token operator"},"<"),(0,q.kt)("span",{parentName:"span",className:"token punctuation"},"{")," v1",(0,q.kt)("span",{parentName:"span",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"span",className:"token builtin"},"number"),(0,q.kt)("span",{parentName:"span",className:"token punctuation"},";")," v2",(0,q.kt)("span",{parentName:"span",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"span",className:"token builtin"},"number")," ",(0,q.kt)("span",{parentName:"span",className:"token punctuation"},"}"),(0,q.kt)("span",{parentName:"span",className:"token operator"},">>"))),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"const")," v1Ref ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,q.kt)("span",{parentName:"code",className:"token generic-function"},(0,q.kt)("span",{parentName:"span",className:"token function"},"useRef"),(0,q.kt)("span",{parentName:"span",className:"token generic class-name"},(0,q.kt)("span",{parentName:"span",className:"token operator"},"<"),(0,q.kt)("span",{parentName:"span",className:"token maybe-class-name"},"HTMLInputElement"),(0,q.kt)("span",{parentName:"span",className:"token operator"},">"))),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token keyword null nil"},"null"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"const")," v2Ref ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,q.kt)("span",{parentName:"code",className:"token generic-function"},(0,q.kt)("span",{parentName:"span",className:"token function"},"useRef"),(0,q.kt)("span",{parentName:"span",className:"token generic class-name"},(0,q.kt)("span",{parentName:"span",className:"token operator"},"<"),(0,q.kt)("span",{parentName:"span",className:"token maybe-class-name"},"HTMLInputElement"),(0,q.kt)("span",{parentName:"span",className:"token operator"},">"))),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token keyword null nil"},"null"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"const")," add ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,q.kt)("span",{parentName:"code",className:"token function"},"useCallback"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,q.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,q.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),"v1Ref",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token property-access"},"current")," ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"&&")," v2Ref",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token property-access"},"current"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"const")," v1 ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"=")," v1Ref",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token property-access"},"current"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token property-access"},"valueAsNumber"),"\n            ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"const")," v2 ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"=")," v2Ref",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token property-access"},"current"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token property-access"},"valueAsNumber"),"\n            ",(0,q.kt)("span",{parentName:"code",className:"token function"},"setRequests"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,q.kt)("span",{parentName:"code",className:"token spread operator"},"..."),"requests",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{")," v1",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," v2 ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"["),"requests",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",(0,q.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,q.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"<"),"div className",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token string"},'"p-3 input-group"'),(0,q.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"<"),"input\n                    type",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token string"},'"number"'),"\n                    ref",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"v1Ref",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                    style",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{")," flexGrow",(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token number"},"1")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                    className",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token string"},'"form-control"'),"\n                    placeholder",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token string"},'"Variable 1"'),"\n                ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"/"),(0,q.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"<"),"input\n                    type",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token string"},'"number"'),"\n                    ref",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"v2Ref",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                    style",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{")," flexGrow",(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token number"},"1")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                    className",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token string"},'"form-control"'),"\n                    placeholder",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token string"},'"Variable 2"'),"\n                ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"/"),(0,q.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"<"),"div className",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token string"},'"input-group-append"'),(0,q.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                    ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"<"),"button className",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token string"},'"btn btn-outline-primary"')," onClick",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"add",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}")," type",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token string"},'"button"'),(0,q.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                        ",(0,q.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Add"),"\n                    ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,q.kt)("span",{parentName:"code",className:"token operator"},"/"),"button",(0,q.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,q.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,q.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,q.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,q.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"requests",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token method function property-access"},"map"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{")," v1",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," v2 ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," index",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,q.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n                ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,q.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Request")," addRequest",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"store",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token method function property-access"},"add"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token method function property-access"},"bind"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),"store",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}")," v1",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"v1",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}")," v2",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"v2",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}")," key",(0,q.kt)("span",{parentName:"code",className:"token operator"},"="),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"index",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"/"),(0,q.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n        ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,q.kt)("span",{parentName:"code",className:"token operator"},"/"),(0,q.kt)("span",{parentName:"code",className:"token operator"},">"),"\n    ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",(0,q.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,q.kt)("span",{parentName:"code",className:"token function"},(0,q.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Request")),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    v1",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    v2",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    addRequest",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    v1",(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token builtin"},"number"),"\n    v2",(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token builtin"},"number"),"\n    ",(0,q.kt)("span",{parentName:"code",className:"token function-variable function"},"addRequest"),(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),"v1",(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token builtin"},"number"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," v2",(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token builtin"},"number"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,q.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,q.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Observable"),(0,q.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,q.kt)("span",{parentName:"code",className:"token builtin"},"number"),(0,q.kt)("span",{parentName:"code",className:"token operator"},">"),"\n",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,q.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,q.kt)("span",{parentName:"code",className:"token constant"},"JSX"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token property-access"},(0,q.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Element"))," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"["),"result",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," setResult",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,q.kt)("span",{parentName:"code",className:"token generic-function"},(0,q.kt)("span",{parentName:"span",className:"token function"},"useState"),(0,q.kt)("span",{parentName:"span",className:"token generic class-name"},(0,q.kt)("span",{parentName:"span",className:"token operator"},"<"),(0,q.kt)("span",{parentName:"span",className:"token builtin"},"string"),(0,q.kt)("span",{parentName:"span",className:"token operator"},">"))),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token string"},'"loading ..."'),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,q.kt)("span",{parentName:"code",className:"token function"},"useEffect"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,q.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,q.kt)("span",{parentName:"code",className:"token keyword"},"const")," subscription ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,q.kt)("span",{parentName:"code",className:"token function"},"addRequest"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),"v1",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," v2",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n            ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token method function property-access"},"pipe"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n                ",(0,q.kt)("span",{parentName:"code",className:"token function"},"timeout"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token number"},"1000"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n                ",(0,q.kt)("span",{parentName:"code",className:"token function"},"retry"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n                ",(0,q.kt)("span",{parentName:"code",className:"token function"},"tap"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),"val",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,q.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,q.kt)("span",{parentName:"code",className:"token function"},"setResult"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),"val",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token method function property-access"},"toString"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,q.kt)("span",{parentName:"code",className:"token console class-name"},"console"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token property-access"},"error"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n            ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n            ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token method function property-access"},"subscribe"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,q.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,q.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," subscription",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,q.kt)("span",{parentName:"code",className:"token method function property-access"},"unsubscribe"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,q.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"<"),"div",(0,q.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"v1",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"+")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"v2",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"result",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n        ",(0,q.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,q.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,q.kt)("span",{parentName:"code",className:"token operator"},">"),"\n    ",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,q.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n")))}E.isMDXComponent=!0;var Z=n(9138),_=n(4246);function C(){return(0,_.jsxs)("div",{className:"d-flex flex-column fullscreen",children:[(0,_.jsx)(m.h,{selectedIndex:1}),(0,_.jsxs)("div",{className:"d-flex flex-column justify-content-stretch container-lg",children:[(0,_.jsx)("div",{className:"d-flex flex-row-responsive",children:(0,_.jsx)(k.X,{initStores:function(e){return e.addStore(new g,"request")},children:function(e){return(0,_.jsx)(L,{rootStore:e})}})}),(0,_.jsx)("div",{className:"p-3 flex-basis-0 flex-grow-1",children:(0,_.jsx)(E,{})})]}),(0,_.jsx)(Z.$,{})]})}function L(e){var a=e.rootStore,n=(0,s.useStoreSubscription)("request",1e3,(function(){return new g}),void 0,a),p=(0,o.useState)([]),c=p[0],r=p[1],m=(0,o.useRef)(null),k=(0,o.useRef)(null),N=(0,o.useCallback)((function(){if(m.current&&k.current){var e=m.current.valueAsNumber,a=k.current.valueAsNumber;r([].concat((0,t.Z)(c),[{v1:e,v2:a}]))}}),[c]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"p-3 input-group",children:[(0,_.jsx)("input",{type:"number",ref:m,style:{flexGrow:1},className:"form-control",placeholder:"Variable 1"}),(0,_.jsx)("input",{type:"number",ref:k,style:{flexGrow:1},className:"form-control",placeholder:"Variable 2"}),(0,_.jsx)("div",{className:"input-group-append",children:(0,_.jsx)("button",{className:"btn btn-outline-primary",onClick:N,type:"button",children:"Add"})})]}),c.map((function(e,a){var t=e.v1,s=e.v2;return(0,_.jsx)(A,{addRequest:n.add.bind(n),v1:t,v2:s},a)}))]})}function A(e){var a=e.v1,n=e.v2,t=e.addRequest,s=(0,o.useState)("loading ..."),m=s[0],k=s[1];return(0,o.useEffect)((function(){var e=t(a,n).pipe((0,p.V)(1e3),(0,c.X)(),(0,r.b)((function(e){return k(e.toString())}),console.error)).subscribe();return function(){return e.unsubscribe()}}),[]),(0,_.jsxs)("div",{children:[a," + ",n," = ",m]})}},1916:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/request",function(){return n(7148)}])}},function(e){e.O(0,[667,971,100,774,888,179],(function(){return a=1916,e(e.s=a);var a}));var a=e.O();_N_E=a}]);